# Boardgamegeek

All projects should be run from within the priamry `boardgamegeek` directory or relative paths will be a problem.

## Project Order

### Step 01 - get boardgames_ranks.csv file from BGG and save it to S3
- `bgg_boardgame_file_retrieval.get_bgg_games_file.py`
- Gets the boardgames_ranks.csv file from BGG and saves it to S3. Currently broken. Download file manually and save to local_data

### 02 - Generate GAME scraping URLS
- `lambda_functions.generate_game_urls_lambda.py`
- Opens the boardgames_ranks.csv file and generates urls for the scraper. This can be run locally. Writes URLS locally when run locally, and always to S3.

### 03 - Scrape games from URLS

- PROD 03 - `lambda_functions.boardgame_scraper_fargate_trigger` for GAME
    - Scrapes the URLs generated by step #2. Can be run locally, but will always trigger tasks on AWS. DO NOT RUN WITHOUT INTENT costs $2 per run.
    - Must run with arg for scraper type "game" example `python lambda_functions.boardgame_scraper_fargate_trigger.py game`

- TEST 03 - `game_data_scraper.game_data_scraper.py` for GAME
    - Scrapes the URLs generated by step #2. Run locally and pass both scraper_type arg and existing filename without directory or suffix
    - Example: `python game_data_scraper/game_data_scraper.py game group1_game_scraper_urls_raw`

### 04 - Clean raw scraped GAME data

- `game_data_cleaner.xml_file_parser.py`
    - Takes the scraped files and composes into various dirty data frames of full data. Writes these locally and to S3.

### 05 - Generate USER scraping URLS

- `lambda_functions.generate_user_urls_lambda.py`
- Loads the games.pkl file generated by 04 and generates user ratings urls. Will attempt to load games.pkl locally, otherwise will retrieve it from S3.

### 06 - Scrape users from URLS

- PROD 06 - `lambda_functions.boardgame_scraper_fargate_trigger` for USER
    - Scrapes the URLs generated by step #2. Can be run locally, but will always trigger tasks on AWS. DO NOT RUN WITHOUT INTENT costs $2 per run.
    - Must run with arg for scraper type "user" example `python lambda_functions.boardgame_scraper_fargate_trigger.py user`

- TEST 06 - `game_data_scraper.game_data_scraper.py` for USER
    - Scrapes the URLs generated by step #2. Run locally and pass both scraper_type arg and existing filename without directory or suffix
    - Example: `python game_data_scraper/game_data_scraper.py user group1_user_scraper_urls_raw`